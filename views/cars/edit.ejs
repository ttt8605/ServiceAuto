<head>
    <link rel="stylesheet" href="/stylesheets/login.css">
</head>

<% layout('/layouts/boilerplate') %>


<div class="container d-flex justify-content-center align-items-center mt-5">
    <div class="row">
        <div class="col-md-6 offset-md-2 col-xl-4">
            <div class="card shadow">
                   <div class="card-body">
<h5 class="card-title mb-4">Modifică status & detalii</h5>                                      
<form action="/cars/<%=cars._id%>?_method=PUT" method="POST" novalidate class="validated-form"  >
<div class=" mb-3">
    <label for="model" class="form-label">Model</label>
    <input type="text" name="model" id="model" class="form-control" placeholder="model" value="<%=cars.model %>" required>
    <div class="valid-feedback">
     Looks good!
    </div>
   </div>

   <div class=" mb-3">
    <label for="plate" class="form-label">Număr de înmatriculare</label>
    <input type="text" name="plate" id="plate" class="form-control" placeholder="plate" value="<%=cars.plate %>" required>
    <div class="valid-feedback">
     Looks good!
    </div>
   </div>

   <div class=" mb-3">
    <label for="owner" class="form-label">Proprietar</label>
    <input type="text" name="owner" id="owner" class="form-control" placeholder="owner" value="<%=cars.owner %>" required>
    <div class="valid-feedback">
     Looks good!
    </div></div>
    <div class=" mb-3">
        <label for="phone" class="form-label">Telefon</label>
        <input type="text" name="phone" id="phone" class="form-control" placeholder="phone number"  value="<%=cars.phone %>"required>
        <div class="valid-feedback">
         Looks good!
        </div>
        
        
    <div class=" mb-3 mt-3">
        <label for="status" class="form-label text">Status Masina</label>
        <select class="form-select" name="status" aria-label="Default select example" >
            <%for(let stat of status){  %>
                <option value="<%= stat%>" <%= cars.status === stat ? 'selected' : ''  %>><%=stat %></option>
                <% } %>
          </select>
       </div>

   </div>
<button class="btn btn-success btn-block">Modifica</button>

</form>
                   </div>
            </div>
        </div>

        <div class="col-md-6  col-xl-4 ">
            <div class="card shadow">
                   <div class="card-body">
                   
                        <h5>Adauga o piesa</h5>
                        <form action="/cars/<%= cars._id %>/piese" method="POST" class="mb-3 validated-form" novalidate>
                          <div class="mb-3">
                              <div class="mb-3">
                                  <label for="name" class="form-label">Piesa</label>
                                  <input type="text" name="piese[name]" id="name" class="form-control" placeholder="numele piesei" required>
                                  <div class="valid-feedback">
                                      Looks good!
                                  </div>
                              </div>
                              <div class="mt-3 mb-3">
                                  <label for="status" class="form-label">Status Piesa</label>
                                  <select id="status" name="piese[status]" class="form-control" aria-label="Default select example">
                                      <% for(let stat of statusPiese) { %>
                                          <option value="<%= stat %>"><%= stat %></option>
                                      <% } %>
                                  </select>
                              </div>
                              <div class="valid-feedback">
                                  Looks good!
                              </div>
                          </div>
                          <button class="btn  btn-success">Adauga</button>
                      </form>     
                      
                      <div class="row align-items-center mb-2 ml-2 mr-2 mt-2 ">
                        <h4 class="card-title text-body-secondary">Piese:</h4>
                        <% for(let piesa of cars.piese) { %>
                         <div class="card mb-3 ">
                             <div class="card-body">
                                 <h5 class="card-title"><%= piesa.name %></h5>
                                 <h6 class="card-title mb-2  mt-2 text-body-secondary">Status: <%=piesa.status %></h6>
                                
                             </div>
                         </div>
<% } %>


                   
            </div>
        </div>
    </div>
</div>
<script>
    // Attach a submit event listener to the form
    document.querySelector('form').addEventListener('submit', function() {
        // Convert the plate input value to uppercase before submitting the form
        const plateInput = document.getElementById('plate');
        plateInput.value = plateInput.value.toUpperCase();
    });
</script>